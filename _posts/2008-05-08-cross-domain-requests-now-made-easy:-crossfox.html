---
layout: post
title: 'Cross-domain requests now made easy: CrossFox'
date: '2008-05-08T13:46:00.001+02:00'
author: Hossam Hammady
tags:
- firefox
modified_time: '2008-05-08T13:50:28.678+02:00'
blogger_id: tag:blogger.com,1999:blog-1427064072400819258.post-1893623337570006434
---

<p>One of the well-known security limitations in AJAX is cross-domain requests. Domain A cannot make requests to domain B. Many workarounds have been made to overcome this. One method is <a href="http://ajaxpatterns.org/On-Demand_Javascript">On-Demand Javascript</a> which exploits the fact that a page can load Javascript files in &lt;script&gt; tags from remote domains. These scripts are executed automatically when they are completely fetched. One drawback is that you can not be notified (or callbacked) when the source gets executed. If the remote site is cooperative (which is almost not the case!), it can return js code to call a function inside your page with any response as its actual parameters.</p><br /><p>Another approach to solve the cross-domain problem is the <a href="http://www.alexpooley.com/2007/08/07/how-to-cross-domain-javascript/">sub-domain approach</a>. Where you assign the remote domain IP to a subdomain under your domain. Apparently, this cannot be distributed to your end-users.</p><br /><p>This problem does exist also in <a href="http://ajaxpatterns.org/IFrame_Call">IFrame AJAX pattern</a>. If a page in domain A sets source of a child iframe to a page in domain B, page A cannot read document of page B, nor change its contents, intuitively!<br /><br /><a href="http://softwareas.com/cross-domain-communication-with-iframes">One solution</a> to this is to communicate through URL of iframes/windows. Yes, they can get/set URLs of each others. But again, they have to be cooperative!</p><br /><p>A proposed solution is to use <a href="https://addons.mozilla.org/firefox/addon/748">Greasemonkey</a> Firefox plugin to make sites cooperative. You can attach any Javascript to any site. However, exchanging information through URLs is not totally convenient nor optimal.</p><br /><p>Tired of partial or sub-optimal solutions? Now behold... CrossFox! Its my latest (and first indeed) Firefox plugin that directly attacks the problem. Once you install it, you get one extra little configuration in your Firefox Preferences window under Security tab. Just type in your trusted domains and all security limitations are void for them!</p><br /><p><img src="http://intranet.espace.com.eg/files/ff-security.png"></p><br /><p>The idea relies on Mozilla's <a href="http://www.mozilla.org/projects/security/components/ConfigPolicy.html">Configurable Security Policies</a> by defining a new security policy that allows a set cross-domain limitation-overrides for a set of domains of user preference.<br /><br />For example, XMLHttpReqeust.open causes a Permission denied exception, so XMLHttpReqeust.open is included in the set. Currently, the set defines methods that would break browser security for a test application. It is expected to dilate as the test application dilates as needed.</p><br /><p>To try the plugin yourself, download the attached file: crossfox.zip, rename it to crossfox.xpi then drag-n-drop it on your Firefox window and it will be installed.<br /><br />Then write your normal AJAX code to do the request on a remote server.<br /><br />For example:<br /><br /><code><br />    var xhr = new XMLHttpRequest();<br /><br />    xhr.open("GET", <url-here>, true);<br /><br />    xhr.onreadystatechange = function() {<br /><br />     document.write(xhr.responseText)<br /><br />    };<br /><br />    xhr.send(null);<br /></url-here></code><br /></p>